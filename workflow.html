<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2023-07-28">

<title>ukbAid - workflow</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">ukbAid</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Welcome!</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./project-description.html" rel="" target="">
 <span class="menu-text">Project description</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-getting-started" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Getting started</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-getting-started">    
        <li>
    <a class="dropdown-item" href="./request-access.html" rel="" target="">
 <span class="dropdown-text">Requesting access to the UK Biobank through SDCA’s project</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./initial-setup.html" rel="" target="">
 <span class="dropdown-text">Initial setup after acceptance</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./using-rap.html" rel="" target="">
 <span class="dropdown-text">Working in Research Analysis Platform (RAP)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./important-notes.html" rel="" target="">
 <span class="dropdown-text">Important notes on using GitHub</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-admin" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Admin</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-admin">    
        <li>
    <a class="dropdown-item" href="./admin.html" rel="" target="">
 <span class="dropdown-text">Administration</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./governance.html" rel="" target="">
 <span class="dropdown-text">Governance</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="./pkg/index.html" rel="" target=""><i class="bi bi-box-seam" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a>
  <ul class="collapse">
  <li><a href="#the-process" id="toc-the-process" class="nav-link" data-scroll-target="#the-process">The process</a></li>
  </ul></li>
  <li><a href="#details" id="toc-details" class="nav-link" data-scroll-target="#details">Details</a>
  <ul class="collapse">
  <li><a href="#upload-project-proposal-on-trello-under-project-proposals" id="toc-upload-project-proposal-on-trello-under-project-proposals" class="nav-link" data-scroll-target="#upload-project-proposal-on-trello-under-project-proposals">1. Upload project proposal on Trello under ‘Project proposals’</a></li>
  <li><a href="#get-acceptance-of-the-proposal-from-the-organizing-committee" id="toc-get-acceptance-of-the-proposal-from-the-organizing-committee" class="nav-link" data-scroll-target="#get-acceptance-of-the-proposal-from-the-organizing-committee">2. Get acceptance of the proposal from the organizing committee</a></li>
  <li><a href="#add-project-description-to-trello-under-ongoing-projects" id="toc-add-project-description-to-trello-under-ongoing-projects" class="nav-link" data-scroll-target="#add-project-description-to-trello-under-ongoing-projects">3. Add project description to Trello under ‘Ongoing projects’</a></li>
  <li><a href="#upload-study-protocol-on-osf.io-and-add-link-to-project-on-trello" id="toc-upload-study-protocol-on-osf.io-and-add-link-to-project-on-trello" class="nav-link" data-scroll-target="#upload-study-protocol-on-osf.io-and-add-link-to-project-on-trello">4. Upload study protocol on osf.io and add link to project on Trello</a></li>
  <li><a href="#statistical-analyses-completed" id="toc-statistical-analyses-completed" class="nav-link" data-scroll-target="#statistical-analyses-completed">5. Statistical analyses completed</a></li>
  <li><a href="#get-code-analysis-reviewed" id="toc-get-code-analysis-reviewed" class="nav-link" data-scroll-target="#get-code-analysis-reviewed">6. Get code analysis reviewed</a></li>
  <li><a href="#upload-study-manuscript-to-pre-print-server-and-add-link-on-trello" id="toc-upload-study-manuscript-to-pre-print-server-and-add-link-on-trello" class="nav-link" data-scroll-target="#upload-study-manuscript-to-pre-print-server-and-add-link-on-trello">7. Upload study manuscript to pre-print server and add link on Trello</a></li>
  <li><a href="#add-link-to-manuscript-on-trello-once-published" id="toc-add-link-to-manuscript-on-trello-once-published" class="nav-link" data-scroll-target="#add-link-to-manuscript-on-trello-once-published">8. Add link to manuscript on Trello once published</a></li>
  <li><a href="#data-documentation" id="toc-data-documentation" class="nav-link" data-scroll-target="#data-documentation">9, Data documentation</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">workflow</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 28, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<ul>
<li><p>Workflow:</p>
<ul>
<li>RAP</li>
<li>Important notes: DON’T SAVE Data</li>
<li>General research</li>
</ul></li>
</ul>
<section id="overview" class="level1">
<h1>Overview</h1>
<p>This is the current workflow of how you start with an idea for a project you want to conduct using data from UK Biobank (UKB). This process is subject to changes.</p>
<section id="the-process" class="level2">
<h2 class="anchored" data-anchor-id="the-process">The process</h2>
<ol type="1">
<li>Upload project proposal on Trello under ‘Project proposals’</li>
<li>Get acceptance of the proposal from the organizing committee</li>
<li>Add project description to Trello under ‘Ongoing projects’</li>
<li>Upload study protocol on osf.io and add link to project on Trello</li>
<li>Statistical analyses completed</li>
<li>Get analysis code reviewed</li>
<li>Upload study manuscript to pre-print server and add link on Trello</li>
<li>Add link to manuscript on Trello once published</li>
<li>Data documentation</li>
</ol>
</section>
</section>
<section id="details" class="level1">
<h1>Details</h1>
<section id="upload-project-proposal-on-trello-under-project-proposals" class="level2">
<h2 class="anchored" data-anchor-id="upload-project-proposal-on-trello-under-project-proposals">1. Upload project proposal on Trello under ‘Project proposals’</h2>
<p><em>in Trello</em> Use the template and fill in:</p>
<ul>
<li>aim</li>
<li>population</li>
<li>intervention/exposure</li>
<li>comparison</li>
<li>outcome</li>
</ul>
<p>For this stage you do not have to be very detailed about the description. This is just to give an overview of what your project is about. We recommend that you search online for any similar project proposals or published protocols using UKB data online, e.g.&nbsp;on OFS registries, and check ongoing and previous projects here on Trello. You also need to make sure that your project falls under the aim of the overall SDCA UKB Application (See here: https://trello.com/c/INDKm9cV)</p>
<p>Move this card to ‘Project proposals’ here on Trello and either tag or send an email to the people on the SDCA UKB RAP steering committee (Daniel Witte, Christina Dahm, Alisa Kjærgaard, Luke Johnston or Daniel Ibsen).</p>
</section>
<section id="get-acceptance-of-the-proposal-from-the-organizing-committee" class="level2">
<h2 class="anchored" data-anchor-id="get-acceptance-of-the-proposal-from-the-organizing-committee">2. Get acceptance of the proposal from the organizing committee</h2>
<p><em>on Trello</em> Once the card has been added to ‘Project proposal,’ the organizing committee will briefly discuss the project at one of our regular meetings. This is mainly to make sure there is not a huge overlap between other projects and to find potential for collaborations. You may also get a few comments on things to consider in your project and specific issues with the data you may need.</p>
<p>One from the organizing committee will be assigned to you as a contact person. Because this person will contribute to your project, this person will also be part of any publications from your UKB project.</p>
</section>
<section id="add-project-description-to-trello-under-ongoing-projects" class="level2">
<h2 class="anchored" data-anchor-id="add-project-description-to-trello-under-ongoing-projects">3. Add project description to Trello under ‘Ongoing projects’</h2>
<p><em>on Trello</em> After approval your project will be moved to ‘Ongoing projects’ and you can add further details to your description if necessary.</p>
<p>Add collaborators to your card and indicate in a comment on the card who should have access to the data. Tag Luke and Alisa in your comment and Luke will make the github repository for your project (add github user IDs) and Alisa will register you at UKB and DNA Nexus (see here for procedures: https://trello.com/c/p4uKUQRX)</p>
</section>
<section id="upload-study-protocol-on-osf.io-and-add-link-to-project-on-trello" class="level2">
<h2 class="anchored" data-anchor-id="upload-study-protocol-on-osf.io-and-add-link-to-project-on-trello">4. Upload study protocol on osf.io and add link to project on Trello</h2>
<p><em>in R using UKB aid R package</em> We have decided that all projects should include a pre-registered protocol of the study. This is to encourage more open research and, because there are so many projects being conducted in the UKB, to ensure that you can later claim to have been first with the research idea, if necessary. This is also good research practice and forces one to carefully think about the study before conducting analyses.</p>
<p>In addition to the protocol, we encourage that most will also include a detailed statistical analysis plan. This also makes it easier to perform the analysis, as there is a clear direction from the beginning. The analysis plan should be of a similar detail as how you would describe your analysis in a manuscript.</p>
<p>Note that as an employee at the Region or Aarhus University you have access to get your analysis plan reviewed by a statistician as part of the <a href="http://www.fagperson.auh.dk/afdelinger/connect-center-for-kliniske-genomiske-data/om-connect/">CONNECT initiative</a>. If you are doing new or more complicated analyses, we encourage you to use this offer.</p>
<p>The protocol can be written in R markdown using the template provided in the ukbAid R package. At this point, you will download the <a href="https://github.com/steno-aarhus/ukbAid">ukbAid R package</a> on your own (local) computer.</p>
</section>
<section id="statistical-analyses-completed" class="level2">
<h2 class="anchored" data-anchor-id="statistical-analyses-completed">5. Statistical analyses completed</h2>
<p><em>in R on UKB RAP</em> At one point you will have conducted all your analyses. We acknowledge that it is an iterative process, but at one point you will be more or less done with the analysis part.</p>
<p>At SDCA we are working on establishing a “code cafe” where you can bring your coding problems and we can review code together. This can be used throughout your UKB analysis.</p>
<p>Before you save any results, tables or figures on Github and make the public, you should consult with your contact person from the organizing committee to make sure we follow the GDPR regulations. You are required to be familiar with these before doing data analysis.</p>
</section>
<section id="get-code-analysis-reviewed" class="level2">
<h2 class="anchored" data-anchor-id="get-code-analysis-reviewed">6. Get code analysis reviewed</h2>
<p><em>in R on Github</em> Once you have finished your analysis the organizing committee will either themselves or find someone to review the code in terms of its content, readability and whether it produces what you write in your statistical analysis plan. This is to make sure there are no major mistakes in the code.</p>
</section>
<section id="upload-study-manuscript-to-pre-print-server-and-add-link-on-trello" class="level2">
<h2 class="anchored" data-anchor-id="upload-study-manuscript-to-pre-print-server-and-add-link-on-trello">7. Upload study manuscript to pre-print server and add link on Trello</h2>
<p><em>on Trello</em> Once you have a draft of the manuscript that is ready for publication, this should be uploaded to a preprint server, again to encourage more open science research practices. There can be reasons for not doing this. Please state this in the project on Trello if that is the case.</p>
</section>
<section id="add-link-to-manuscript-on-trello-once-published" class="level2">
<h2 class="anchored" data-anchor-id="add-link-to-manuscript-on-trello-once-published">8. Add link to manuscript on Trello once published</h2>
<p><em>on Trello</em> Congratulations. Your study is published. Please upload the link to the study on the project and move the project to ‘Completed project’</p>
</section>
<section id="data-documentation" class="level2">
<h2 class="anchored" data-anchor-id="data-documentation">9, Data documentation</h2>
<p><em>in R on Github</em> As a final step, we would like you to add relevant code to the common code files (note, this is under construction at the moment). If you have made new variables, functions of types of analyses, that could be of interest to everyone. This step is important because if we all help build these documents, we can as a research unit be much more efficient and aligned in our research practices. In the end, this will be better use of research and give better prevention and care for our patients.</p>
<p>Last updated: 8 September, 2022. DBI</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>